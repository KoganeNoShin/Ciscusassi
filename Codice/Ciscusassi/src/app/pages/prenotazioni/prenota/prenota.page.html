<link
	rel="stylesheet"
	href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"
	integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY="
	crossorigin=""
/>

<ion-content [fullscreen]="true">
	<app-hero
		title="PRENOTAZIONE"
		description="Prenota il tuo tavolo e regalati un'esperienza culinaria senza tempo!"
		[backgroundURL]="'PrenotazioneBackground.jpeg'"
	></app-hero>

	<div class="second-div bg-color-senape">
		@if(!loadingPrenotazioni) {

		<!-- Se abbiamo caricato correttamente -->

		<ion-text class="ion-text-center">
			<h1 class="text-color-bianco">PRENOTA UN TAVOLO</h1>
		</ion-text>

		@if (prenotazioni.length > 0) {

		<!-- Abbiamo delle prenotazioni a carico -->

		<ion-text class="ion-text-center">
			<p class="text-color-bianco">Hai già una prenotazione!</p>
		</ion-text>

		<ion-grid>
			@for (prenotazione of prenotazioni; track
			prenotazione.id_prenotazione) {

			<ion-row>
				<ion-col size="12" class="center-row">
					<app-prenotazione-card
						[prenotazione]="prenotazione"
						(confermaCancellazioneEmitter)="confermaCancellazione($event)"
					></app-prenotazione-card>
				</ion-col>
			</ion-row>

			}
		</ion-grid>
		} @else {

		<!-- Non abbiamo delle prenotazioni a carico -->

		<ion-text class="ion-text-center">
			<p class="text-color-bianco">
				Trova il ristorante più adatto a te!
			</p>
		</ion-text>

		<ion-grid>
			<ion-row>
				<ion-col size="6" class="filiali-col">
					<ion-item class="barra-ricerca">
						<ion-input
							placeholder="Indirizzo Filiale"
							[(ngModel)]="searchFiliale"
							(ionInput)="filtroFiliali()"
						></ion-input>
					</ion-item>

					<div class="filiali-list">
						@for (f of filialiFiltrate; track f.id_filiale) {
						<ion-button
							class="filiale"
							(click)="salvaFiliale(f.id_filiale)"
						>
							<ion-row>
								<ion-col size="3">
									<img
										[src]="f.immagine"
										alt="Immagine della Filiale"
										class="immagine-filiale"
									/>
								</ion-col>
								<ion-col size="9">
									<ion-label>
										<h2 class="filiale-comune">
											{{ f.comune }}
										</h2>
										<h2 class="filiale-indirizzo">
											{{ f.indirizzo }}
										</h2>
										<p>11:50 - 16:30<br />19:20 - 00:00</p>
									</ion-label>
								</ion-col>
							</ion-row>
						</ion-button>
						}
					</div>
				</ion-col>

				<ion-col size="6">
					<ion-card class="map-card">
						<div class="map-card-content">
							<app-leaflet-map></app-leaflet-map>
						</div>
					</ion-card>
				</ion-col>
			</ion-row>
		</ion-grid>
		} } @else {
		<div class="loading-wrapper">
			<ion-spinner name="crescent" color="light"></ion-spinner>
		</div>
		}
	</div>
</ion-content>
