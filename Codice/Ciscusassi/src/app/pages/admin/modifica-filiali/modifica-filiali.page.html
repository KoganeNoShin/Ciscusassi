<ion-header [translucent]="true">
  <ion-toolbar>
    <ion-title>Modifica Filiale</ion-title>
  </ion-toolbar>
</ion-header>

<ion-content [fullscreen]="true" class="ion-padding">
  <div class="page-title">MODIFICA FILIALE</div>
  <ion-card class="custom-card">
    <div class="card-content">
      <!-- Box immagine cliccabile -->
      <div class="image-upload" (click)="fileInput.click()" style="cursor: pointer; text-align:center;">
        <input #fileInput type="file" hidden (change)="onFileSelected($event)" />
        <ng-container *ngIf="filiale.immagine; else placeholder">
          <img
            [src]="filiale.immagine"
            alt="Anteprima immagine"
            style="max-width: 100%; border-radius: 8px;"
          />
        </ng-container>
        <ng-template #placeholder>
          <h1>Modifica l'immagine per la filiale</h1>
          <ion-icon name="image-outline" size="large"></ion-icon>
        </ng-template>
      </div>

      <!-- Campi form -->
      <div class="form-fields" style="margin-top: 20px;">
        <ion-input
          placeholder="Modifica l'indirizzo"
          [(ngModel)]="filiale.indirizzo"
          (ionInput)="cercaIndirizzo($event)"
          autocomplete="off"
        ></ion-input>

        <!-- Lista suggerimenti -->
        <ion-list *ngIf="showSuggerimenti" class="suggestions-list" style="max-height: 150px; overflow-y: auto; border: 1px solid #ccc; margin-bottom: 10px;">
          <ion-item button *ngFor="let s of suggerimenti" (click)="selezionaIndirizzo(s)">
            {{ s.display_name }}
          </ion-item>
        </ion-list>

        <ion-input
          placeholder="Modifica il comune"
          [(ngModel)]="filiale.comune"
          style="margin-top: 10px;"
        ></ion-input>

        <ion-input
          type="number"
          placeholder="Modifica il numero di tavoli"
          [(ngModel)]="filiale.num_tavoli"
          style="margin-top: 10px;"
        ></ion-input>

        <ion-button
          expand="block"
          color="success"
          style="margin-top: 20px;"
          [disabled]="loading"
          (click)="modificaFiliale()"
        >
          MODIFICA FILIALE
        </ion-button>
      </div>
    </div>
  </ion-card>
</ion-content>
